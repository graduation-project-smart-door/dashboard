var q=Object.defineProperty;var J=(e,t,o)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var E=(e,t,o)=>(J(e,typeof t!="symbol"?t+"":t,o),o);import{defineComponent as I,reactive as G,openBlock as f,createElementBlock as h,createVNode as d,unref as b,normalizeProps as Q,guardReactiveProps as X,createBlock as S,mergeProps as Z,ref as k,watch as ee,onMounted as H,withCtx as p,Fragment as V,renderList as M,createStaticVNode as te,resolveComponent as oe,createElementVNode as i,TransitionGroup as se,toDisplayString as ae,createTextVNode as A,pushScopeId as ne,popScopeId as re}from"vue";import{C as B,r as L,u as le,f as R,B as ie,d as ce,c as $,i as de,a as _e,L as pe,h as w,_ as ue}from"./profile-222b7858.js";import{_ as x,R as fe}from"./index-4aeae6ce.js";import{g as ge,h as me,j as T,k as ve,l as z}from"./vendor-066c2b0d.js";/* empty css               */import{u as he}from"./useScreen-5a188402.js";import{A as ye,a as be}from"./AxiosService-2d728613.js";/* empty css                  *//* empty css                  */import{d as Ce}from"./index-5a7a4d4a.js";const xe={class:"home-average-chart"},we=I({__name:"HomeAverageChart",setup(e){B.register(...L);const o=G({labels:["Cool guy1","Cool guy2","Cool guy3","Cool guy4"],datasets:[{data:[...Array.from({length:5}).map((r,n)=>n)],backgroundColor:["#5E72E4","#966afc","#7F69D5","#9560C4","#A358B2","#AD52A0","#B24E8F"],barPercentage:.3,min:0}]}),a={plugins:{customCanvasBackgroundColor:{color:"#ffffff"},tooltip:{cornerRadius:2,yAlign:"top",xAlign:"center",yPadding:5,caretSize:3,caretPadding:6,displayColors:!1,bodyFontSize:10,callbacks:{title:()=>""}},legend:{display:!1}},indexAxis:"y",scales:{y:{grid:{drawTicks:!1,drawBorder:!1},ticks:{font:{size:12},padding:14}}}},{barChartProps:s}=le({chartData:o,options:a,plugins:[R]});return(r,n)=>(f(),h("div",xe,[d(b(ie),Q(X(b(s))),null,16)]))}});const De=x(we,[["__scopeId","data-v-12a09079"]]);/*!
 * chartjs-plugin-gradient v0.6.1
 * https://github.com/kurkle/chartjs-plugin-gradient#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */const F=B.version,ke=F?(e,t)=>e.parse(t):(e,t)=>t;function Se(e,t){const o=de(t)?parseFloat(t):ke(e,t);return e.getPixelForValue(o)}const O=e=>e&&e.right>e.left&&e.bottom>e.top;function j(e,t,o){return t==="r"?e.createRadialGradient(o.xCenter,o.yCenter,0,o.xCenter,o.yCenter,o.drawingArea):t==="y"?e.createLinearGradient(0,o.bottom,0,o.top):e.createLinearGradient(o.left,0,o.right,0)}function N(e,t){t.forEach(function(o){e.addColorStop(o.stop,o.color.rgbString())})}function U(e,t,o){if(e.options.has(t.key)){const s=e.options.get(t.key).filter(r=>r.datasetIndex===o);if(s.length)return s[0]}}function K(e,t){if(e.type==="radialLinear"){const r=e.getDistanceFromCenterForValue(t);return{pixel:r,stop:r/e.drawingArea}}const o=e.options.reverse,a=Se(e,t),s=e.getDecimalForPixel(a);return{pixel:a,stop:o?1-s:s}}const P=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,y=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Ie(e,t,o){const a=t.color.rgb,s=y(a.r/255),r=y(a.g/255),n=y(a.b/255),l=o.color.rgb,c=y(l.r/255),u=y(l.g/255),g=y(l.b/255);return $({r:Math.round(P(s+e*(c-s))*255),g:Math.round(P(r+e*(u-r))*255),b:Math.round(P(n+e*(g-n))*255),a:a.a+e*Math.abs(l.a-a.a)})}function Pe(e,t,o,a){const s=U(e,t,o);if(!s||!s.stopColors.length)return;const{stop:r}=K(s.scale,a);let n,l;for(const c of s.stopColors){if(c.stop===r)return c.color;c.stop<r?n=c:c.stop>r&&!l&&(l=c)}return l?Ie(r,n,l):n}const W=[{key:"backgroundColor",legendItemKey:"fillStyle"},{key:"borderColor",legendItemKey:"strokeStyle"}],Ve=(e,t)=>t.labels&&t.labels.font&&ce(t.labels.font.size)?t.labels.font.size:e.options.font.size;function Me(e,t,o,a,s){const r=U(e,o,a.datasetIndex);if(!r||!r.stopColors.length)return;const n=j(t,r.axis,s);N(n,r.stopColors),a[o.legendItemKey]=n}function Ae(e,{boxWidth:t,boxHeight:o}){return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+t,xCenter:e.left+t/2,yCenter:e.top+o/2,drawingArea:Math.max(t,o)/2}}function Be(e,t,o,a){const s=e.legend.legendHitBoxes[o.datasetIndex],r=Ae(s,a);O(r)&&W.forEach(function(n){Me(t,e.ctx,n,o,r)})}function Fe(e,t,o,a){for(const s of e.legend.legendItems)W.forEach(function(r){const n=o.data[s.index],l=Pe(t,r,a,n);l&&l.valid&&(s[r.legendItemKey]=l.rgbString())})}function Ye(e,t){const o=e.legend,a=o.options,s=a.labels.boxHeight?a.labels.boxHeight:Ve(e,a),r=a.labels.boxWidth,n=e.data.datasets;for(let l=0;l<n.length;l++){const c=o.legendItems[l];c.datasetIndex===l?Be(e,t,c,{boxWidth:r,boxHeight:s}):Fe(e,t,n[l],l)}}const D=new Map,Ee=F?(e,t)=>e[t+"Scale"]:(e,t)=>e.controller["_"+t+"Scale"];function Ge(e,t,o){for(const a of Object.keys(t)){const{pixel:s,stop:r}=K(e,a);if(isFinite(s)&&isFinite(r)){const n=$(t[a]);n&&n.valid&&o.push({stop:Math.max(0,Math.min(1,r)),color:n})}}o.sort((a,s)=>a.stop-s.stop)}function He(e,t,o,a){t[o]=a,e.dataset&&(e.dataset.options?e.dataset.options[o]=a:e.dataset[o]=a)}function Le(e,t,o,a){let s=e.options.get(o);return s?t.hidden||(s=s.filter(r=>r.datasetIndex!==a),e.options.set(o,s)):(s=[],e.options.set(o,s)),s}function Re(e,t,o,a,s){const r=e.ctx,n=e.getDatasetMeta(s);if(!n.hidden)for(const[l,c]of Object.entries(o)){const{axis:u,colors:g}=c;if(!g)continue;const m=Ee(n,u);if(!m){console.warn(`Scale not found for '${u}'-axis in datasets[${s}] of chart id ${e.id}, skipping.`);continue}const v=Le(t,n,l,s),_={datasetIndex:s,axis:u,scale:m,stopColors:[]};v.push(_);const Y=j(r,u,m);Ge(m,g,_.stopColors),_.stopColors.length&&(N(Y,_.stopColors),He(n,a,l,Y))}}var $e={id:"gradient",beforeInit(e){const t={};t.options=new Map,D.set(e,t)},beforeDatasetsUpdate(e){const t=e.chartArea;if(!O(t))return;const o=D.get(e),a=e.data.datasets;for(let s=0;s<a.length;s++){const r=a[s],n=r.gradient;n&&Re(e,o,n,r,s)}},afterUpdate(e){const t=D.get(e);e.legend&&e.legend.options.display!==!1&&F&&Ye(e,t)},destroy(e){D.delete(e)}};const Te=I({__name:"HomeVisitingChart",props:{arrival:{default:()=>[]},leaving:{default:()=>[]}},setup(e){B.register(...L,$e);const{isMobile:t}=he(),o=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"].map(l=>t.value&&l==="Понедельник"?"Пн":l),a=G({labels:o,datasets:[{label:"Приходы и уходы",borderColor:"#596cff",borderWidth:4,fill:!0,tension:.4,cubicInterpolationMode:"monotone",gradient:{backgroundColor:{axis:"y",colors:{0:"rgba(255, 255, 255, 0)",100:"rgba(89, 108, 255, 0.2)"}}},data:[65,59,80,81,56,55,40]}]}),s={plugins:{customCanvasBackgroundColor:{color:"#ffffff"},tooltip:{cornerRadius:2,yAlign:"top",xAlign:"center",yPadding:5,caretSize:3,caretPadding:6,displayColors:!1,bodyFontSize:10,callbacks:{title:()=>""}},legend:{display:!1}},scales:{y:{grid:{display:!0,borderDash:[8,8],lineWidth:2,color:function(l){return l.index===5?"transparent":(l.tick.value>0,"#dee2e6")},drawBorder:!1},ticks:{display:!1,count:6},min:0},x:{ticks:{padding:t.value?12:24,color:"#8392AB"},grid:{display:!1,drawBorder:!1}}}},{lineChartProps:r,lineChartRef:n}=_e({chartData:a,options:s,plugins:[R]});return(l,c)=>(f(),S(b(pe),Z(b(r),{class:"home-visiting-chart"}),null,16))}});const ze=x(Te,[["__scopeId","data-v-97ecac7c"]]);const Oe=I({__name:"HomeVisitingFilters",emits:["change-filters"],setup(e,{emit:t}){const o=k("week"),a=k([new Date,new Date(new Date().getTime()-7*24*60*60*1e3)]),s=k(a.value),r=()=>{const n=new Date;switch(o.value){case"week":s.value=[n,new Date(n.getTime()-7*24*60*60*1e3)];break;case"month":s.value=[n,new Date(n.getTime()-30*24*60*60*1e3)];break;case"halfYear":s.value=[n,new Date(n.getTime()-182*24*60*60*1e3)];break;case"year":s.value=[n,new Date(n.getTime()-364*24*60*60*1e3)];break;default:{s.value=[n,n];break}}t("change-filters",{date_from:w(s.value[0]).format("DD.MM.YYYY"),date_to:w(s.value[1]).format("DD.MM.YYYY")})};return ee(()=>o.value,()=>{r()}),H(()=>{t("change-filters",{date_from:w(s.value[0]).format("DD.MM.YYYY"),date_to:w(s.value[1]).format("DD.MM.YYYY")})}),(n,l)=>{const c=ge,u=me,g=T,m=ve,v=z;return f(),S(v,{class:"home-visiting-filters"},{default:p(()=>[d(g,{md:6,class:"d-f jc-c d-md-b"},{default:p(()=>[d(u,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=_=>o.value=_),class:"mr-12",placeholder:"Период"},{default:p(()=>[(f(!0),h(V,null,M(b(Ce),_=>(f(),S(c,{key:_.value,label:_.label,value:_.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(g,{xs:0,md:18,class:"mt-12 mt-md-0 d-f jc-c jc-md-fe"},{default:p(()=>[d(m,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=_=>s.value=_),type:"daterange","start-placeholder":"От","end-placeholder":"До","default-time":a.value},null,8,["modelValue","default-time"])]),_:1})]),_:1})}}});const je=x(Oe,[["__scopeId","data-v-9226a38e"]]);const Ne={},Ue={class:"home-last-visit-card"},Ke=te('<div class="d-f ai-c jc-sb" data-v-49068078><div data-v-49068078><div class="text-lg color-primary-secondary bold" data-v-49068078> Вася Пупкин </div><div class="text-md color-primary-secondary bold" data-v-49068078> Программист </div><div class="text-md mt-8" data-v-49068078>11:01</div></div><div class="home-last-visit-card__image-wrapper" data-v-49068078><img class="home-last-visit-card__image" src="'+ue+'" data-v-49068078></div></div>',1),We=[Ke];function qe(e,t){return f(),h("div",Ue,We)}const Je=x(Ne,[["render",qe],["__scopeId","data-v-49068078"]]);class Qe extends be{constructor(o){super(o);E(this,"getVisitingChart",async o=>this.axiosCall({method:"get",url:"/statistic",params:o}))}}const Xe=new Qe(ye),C=e=>(ne("data-v-ca04d9ff"),e=e(),re(),e),Ze={class:"home-page"},et={class:"home-page__cards"},tt=C(()=>i("div",{class:"home-page__image-wrapper"},[i("div",{class:"home-page__image"}),i("div",{class:"home-page__image-content-wrapper"},[i("div",{class:"home-page__image-content"},[i("h3",null,"Не хочешь также ныть?"),i("div",{class:"text-lg"},[A(" Получи диплом в "),i("span",{class:"bold"},"ВКИ"),i("br"),A(" и будешь счастлив! ")])])])],-1)),ot={class:"px-20"},st=C(()=>i("div",null,[i("div",null,[i("span",{class:"bold"},"Входов в день")]),i("div",null,[i("h5",{class:"color-gray"},"19647")])],-1)),at=C(()=>i("div",{class:"mt-8"},[i("div",null,[i("span",{class:"bold"},"Выходов в день")]),i("div",{class:"-value-"},[i("h5",{class:"color-gray"},"19647")])],-1)),nt={class:"mt-8"},rt=C(()=>i("div",null,[i("span",{class:"bold"},"Среднее время")],-1)),lt=C(()=>i("div",null,[i("h5",{class:"color-gray"},"182")],-1)),it=C(()=>i("span",null," *Данные приведены за месяц ",-1)),ct=I({__name:"HomePage",setup(e){const t=k([]);H(()=>{});const o=async a=>{const[s,r]=await Xe.getVisitingChart(a);!s&&r&&console.log("success")};return(a,s)=>{const r=Je,n=je,l=ze,c=T,u=z,g=De,m=oe("router-link");return f(),h("div",Ze,[i("div",et,[(f(!0),h(V,null,M([...Array(5)].map(v=>0),(v,_)=>(f(),S(r,{key:_,class:"m-4"}))),128))]),d(se,{tag:"ul",name:"fade",class:"d-f ai-c"},{default:p(()=>[(f(!0),h(V,null,M(t.value,(v,_)=>(f(),h("div",{key:_,class:"card"},ae(v.value),1))),128))]),_:1}),d(u,{class:"home-page__content-top"},{default:p(()=>[d(c,{md:16,class:"home-page__visiting-chart-wrapper"},{default:p(()=>[d(n,{onChangeFilters:o}),d(l,{arrival:[],leaving:[]})]),_:1}),d(c,{span:0,md:8},{default:p(()=>[tt]),_:1})]),_:1}),d(u,{class:"home-page__content-bottom",align:"middle"},{default:p(()=>[d(c,{span:24,md:18},{default:p(()=>[d(u,{class:"h-100 average-time"},{default:p(()=>[d(c,{span:24},{default:p(()=>[d(g,{data:[]})]),_:1})]),_:1})]),_:1}),d(c,{xs:0,sm:0,md:6},{default:p(()=>[i("div",ot,[st,at,i("div",nt,[rt,lt,d(m,{class:"link my-8 d-b",to:{name:b(fe).EventsPage}},{default:p(()=>[A(" См. всех ")]),_:1},8,["to"])]),it])]),_:1})]),_:1})])}}});const Ct=x(ct,[["__scopeId","data-v-ca04d9ff"]]);export{Ct as default};
