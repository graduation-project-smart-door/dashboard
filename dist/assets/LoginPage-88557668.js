import{p as M,H as C,C as B,x as L,y as N,z as P,B as T,j as z,l as A}from"./vendor-066c2b0d.js";/* empty css               *//* empty css                     *//* empty css                  */import{b as j,c as w}from"./AxiosService-2d728613.js";import{defineComponent as q,ref as y,reactive as x,onMounted as H,openBlock as V,createBlock as b,withModifiers as D,withCtx as t,createVNode as e,createTextVNode as u,createElementVNode as a,pushScopeId as O,popScopeId as $}from"vue";import{c as p}from"./formRules-f014f892.js";import{U as G}from"./UserService-d302fd08.js";import{u as J}from"./useUser-fefba284.js";import{R as K,_ as E}from"./index-4aeae6ce.js";const Q=q({__name:"LoginForm",setup(l){const{setAuthorized:k,setProfile:g,isAuthorized:_}=J(),i=M(),m=y(),n=x({email:"",password:""}),h=y(!1),F=x({email:[p.required,p.email],password:[p.required]});H(()=>{v()});const v=async()=>{await j.get("https://jsonplaceholder.typicode.com/users/1")},I=async()=>{var d;m.value&&((d=m.value)==null||d.validate(async o=>{if(o){const[c,s]=await G.login(n);!c&&s&&(w.set("accessToken",s.access_token),w.set("refreshToken",s.refresh_token),await v(),_?await i.push({name:K.HomePage}):B({type:"error",message:"Что-то пошло не так"}))}}))};return(d,o)=>{const c=L,s=N,S=C,R=P,U=T;return V(),b(U,{ref_key:"loginFormInstance",ref:m,class:"login-form",model:n,rules:F,onSubmit:o[3]||(o[3]=D(()=>{},["prevent"]))},{default:t(()=>[e(s,{prop:"email"},{default:t(()=>[e(c,{modelValue:n.email,"onUpdate:modelValue":o[0]||(o[0]=r=>n.email=r),placeholder:"Введите почту"},null,8,["modelValue"])]),_:1}),e(s,{prop:"password"},{default:t(()=>[e(c,{modelValue:n.password,"onUpdate:modelValue":o[1]||(o[1]=r=>n.password=r),placeholder:"Введите пароль"},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(S,{modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=r=>h.value=r),class:"login-form__switch","active-text":"Запомнить меня"},null,8,["modelValue"])]),_:1}),e(s,{class:"login-form__submit-button"},{default:t(()=>[e(R,{type:"primary",class:"bold","data-testid":"submit",onClick:I},{default:t(()=>[u("Авторизация")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});const W=E(Q,[["__scopeId","data-v-31d81fd8"]]);const X={},f=l=>(O("data-v-91f8ac07"),l=l(),$(),l),Y={class:"login-page__content"},Z=f(()=>a("h3",null,"Авторизация",-1)),ee=f(()=>a("div",{class:"text-lg mt-8 color-primary-secondary"},"Введите почту и пароль для авторизации",-1)),oe=f(()=>a("div",{class:"login-page__background"},[a("h4",null,[u(" И мы сегодня покорим это небо, нет, я соврал "),a("br"),u(" И ты станешь калекой ")])],-1));function te(l,k){const g=W,_=z,i=A;return V(),b(i,{class:"login-page",align:"middle"},{default:t(()=>[e(_,{span:24,md:14},{default:t(()=>[a("div",Y,[Z,ee,e(g,{class:"mt-24"})])]),_:1}),e(_,{span:0,md:10,class:"h-100 w-100 py-md-16 mt-md-0 mt-24"},{default:t(()=>[oe]),_:1})]),_:1})}const pe=E(X,[["render",te],["__scopeId","data-v-91f8ac07"]]);export{pe as default};
