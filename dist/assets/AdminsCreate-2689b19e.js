var g=Object.defineProperty;var I=(d,l,e)=>l in d?g(d,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[l]=e;var f=(d,l,e)=>(I(d,typeof l!="symbol"?l+"":l,e),e);import{G as E,C as U,x as k,y as w,z as B,A as S,B as q}from"./vendor-066c2b0d.js";/* empty css                     *//* empty css                    *//* empty css                  */import{A as b,a as D}from"./AxiosService-2d728613.js";import{defineComponent as j,ref as C,reactive as y,openBlock as v,createBlock as G,withCtx as m,createVNode as t,createTextVNode as V,createElementBlock as O}from"vue";import{c}from"./formRules-f014f892.js";import{_ as x}from"./index-4aeae6ce.js";class R extends D{constructor(e){super(e);f(this,"create",async e=>this.axiosCall({method:"post",url:"/admins",data:e}));f(this,"getAll",async e=>this.axiosCall({method:"get",url:"/admins",params:e}))}}const T=new R(b),$=d=>d.split(/(?=[A-Z])/).join("_").toLowerCase(),z=j({__name:"AdminsCreateForm",setup(d){const l=C(),e=C(),o=y({role:"admin",firstName:"",lastName:"",patronymic:"",image:null,phone:""}),N=y({firstName:[c.required],lastName:[c.required],role:[c.required],email:[c.required,c.email]}),A=i=>{var r,n;(r=e.value)==null||r.clearFiles();const a=i[0];a.uid=E(),o.image=a,(n=e.value)==null||n.handleStart(a)},F=async()=>{var i;l.value&&((i=l.value)==null||i.validate(async a=>{if(a){const r=new FormData;Object.entries(o).forEach(([u,_])=>{const s=u,h=_;o[s]&&r.append($(u),h)});const[n,p]=await T.create(r);!n&&p&&U({type:"success",message:"Cool"})}}))};return(i,a)=>{const r=k,n=w,p=B,u=S,_=q;return v(),G(_,{ref_key:"adminsCreateFormInstance",ref:l,class:"admins-create-form",model:o,rules:N},{default:m(()=>[t(n,{prop:"firstName"},{default:m(()=>[t(r,{modelValue:o.firstName,"onUpdate:modelValue":a[0]||(a[0]=s=>o.firstName=s),placeholder:"Имя"},null,8,["modelValue"])]),_:1}),t(n,{prop:"lastName"},{default:m(()=>[t(r,{modelValue:o.lastName,"onUpdate:modelValue":a[1]||(a[1]=s=>o.lastName=s),placeholder:"Фамилия"},null,8,["modelValue"])]),_:1}),t(n,{prop:"patronymic"},{default:m(()=>[t(r,{modelValue:o.patronymic,"onUpdate:modelValue":a[2]||(a[2]=s=>o.patronymic=s),placeholder:"Отчество"},null,8,["modelValue"])]),_:1}),t(n,{prop:"email"},{default:m(()=>[t(r,{modelValue:o.email,"onUpdate:modelValue":a[3]||(a[3]=s=>o.email=s),placeholder:"Почта","data-testid":"email"},null,8,["modelValue"])]),_:1}),t(n,{prop:"phone"},{default:m(()=>[t(r,{modelValue:o.phone,"onUpdate:modelValue":a[4]||(a[4]=s=>o.phone=s),placeholder:"Телефон"},null,8,["modelValue"])]),_:1}),t(n,{prop:"image"},{default:m(()=>[t(u,{ref_key:"adminsCreateUploadInstance",ref:e,"auto-upload":!1,limit:1,"on-exceed":A,action:""},{default:m(()=>[t(p,{type:"primary"},{default:m(()=>[V("Изображение")]),_:1})]),_:1},512)]),_:1}),t(n,null,{default:m(()=>[t(p,{type:"primary","data-testid":"submit",onClick:F},{default:m(()=>[V("Создать")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});const L=x(z,[["__scopeId","data-v-d9915168"]]),M={},P={class:"admins-create"};function Z(d,l){const e=L;return v(),O("div",P,[t(e)])}const te=x(M,[["render",Z]]);export{te as default};
